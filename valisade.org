* TODO NEED FURS to continue past chapter 1

* Graphics tasks

** DONE paint wax cylinder
   CLOSED: [2014-05-07 Wed 18:33]
** DONE paint cylindrophone
   CLOSED: [2014-05-07 Wed 18:33]
** DONE paint Valisade entrance
   CLOSED: [2014-05-07 Wed 18:33]
** DONE paint bone flute
   CLOSED: [2014-05-07 Wed 18:33]
** DONE paint snow as black/darkgray dot flakes which are then color-inverted 
   CLOSED: [2014-05-07 Wed 18:33]
** DONE paint blue/red blood
   CLOSED: [2014-05-07 Wed 18:33]
** DONE paint sextant
   CLOSED: [2014-05-07 Wed 18:33]
** DONE paint Silver Timecubes and Time Keys
   CLOSED: [2014-05-07 Wed 18:33]
** DONE paint spell icons
   CLOSED: [2014-05-07 Wed 18:33]
*** light, protection, crystal arrow, heavy wounds, Explosion, Dispel Magic

** TODO import wax cylinder 
** TODO import cylindrophone
** TODO import Valisade exterior stones
** TODO import bone flute
** TODO import snow/blood
** TODO import sextant
** TODO import timecubes/timekeys
** TODO import new spell icons
** TODO import Arturo pentaquin
** TODO import screech owl
** TODO import stone monk
** TODO import cryptghast
** TODO import skeleton archers
** TODO import Black Wizards
** TODO import the cypress
** TODO import ruined houses
** TODO import Nothbehem houses
** TODO import inkwell/quillpen

* Bugfixes

** TODO should show-error when pathfinding fails ONLY for geoffrey
** TODO disallow deploying tent on top of geoffrey
** TODO don't allow tent to be put in containers other than Geoffrey
** TODO disallow equipping non-held items
** TODO auto-close inventory windows on faraway objects if you move
** TODO destroy bubbles when closing gumps
** TODO don't consume wolf corpse unless cast is successful, 
** TODO don't allow spawning geoffrey in obstacle
** TODO Disable text event handling on SCROLL-TEXT etc http://paste.lisp.org/display/141642
** TODO Don't allow giving things to lucius
** TODO Fix inventory bookeeping not getting properly duplicated?
** TODO Add heuristic to try to choose a decent spot, when target space isn't occupiable
*** TODO this is needed for wolf to chase human when human w/smaller bounding box is near an obstacle

* Tasks

** TODO Spell scrolls have 1 use, Spell Book teaches you the spell
** TODO [#A] Reagent search should look in bags
** TODO [#A] Review code
** TODO [#A] Define quest/worldmap structure 
*** TODO create fixed-symbols dense overworld map on graph paper
*** TODO [#B] attempt to map grid size/density and procgen it as a list of lists of symbols, with Valisade in Northeast
*** TODO [#B] or, something to permute the map?
*** TODO incrementally reveal map
*** TODO allow saving progress like a traditional rpg
*** TODO return to using simple pause/resume-on-command

** TODO [#A] change to right-click on geoffrey for Pause
*** TODO [#A] change to clicking modeline status to open Status scroll

** TODO [#A] assign songs to scenes/moments
** TODO [#A] Seek ye the Screech Owl when storm thunders; when her cry is heard, blow the flute and she will appear and disclose to find stuff at "3 hectares north and two hectares west."
*** TODO custom lisp for rain/thunder with fadein/fadeout
*** TODO code owl
*** TODO alter flutism.wav for downward owl cry imitation
** TODO [#A] ice cracks should be hidden until nearby
** TODO [#A] use only one NARRATE function
** TODO [#A] Require light spell in dark areas
** TODO [#A] Slight health drain when freezing
** TODO [#A] Slight aim jitter when freezing
** TODO [#A] Lore system
** TODO [#A] add stone monk with Lore and story messages
** TODO [#A] books with lore
** TODO [#A] silver books with spells/Special lore
** TODO [#A] Light spell (2 mana)
*** Casts light with medium radius
*** Lasts for 4 minutes 
*** Very slight flicker of circle
*** Required in dark areas
*** Certain enemies can negate magic spell effects, dousing your light
** TODO [#A] Protection (15 mana) (1 nightshade)
*** Temporary 35% reduction in combat damage received
** TODO [#A] Craft crystal arrow (20 mana) (snow)
** TODO [#A] Cure heavy wounds (50 mana) (2 ginseng)
*** Heals between 40-60 HP
** TODO [#A] Find rational consistent way to exit from basements
*** TODO Add sextant
** TODO [#B] allow eating violets and snowdrops for restoring 1mp
** TODO [#B] reasons to return to town: arturo can heal
** TODO [#B] hitting I while inventory open should close it, same with (S)pellbook
** TODO [#B] preload textures when possible---allow method for preloading and default field of resource names
*** TODO Proper parameterized texture cache expiring at travel time
** TODO [#B] Improve shape of flower clusters and branches wood around trees
** TODO [#B] Modeline lighter(s) for Freezing/Hungry/Dying
** TODO [#B] Fix spellcasting/activating objects after dead
** TODO [#B] allow canceling travel
** TODO [#B] Explosion (20 mana) (1 nightshade, 1 stone)
*** 90% chance of scorching several enemies in target area
** TODO [#B] Add magic outdoor item boxes with coverstone.png coverstone2.png item-box.png
** TODO [#B] Ancient caves with: lock/key system--- plate with lock, you must use corresponding key
*** TODO circle/triangle/warrior
*** TODO lock beomes seal when correct key is used, and doors open
** TODO Write lore for various sources
*** TODO Default object lore
*** TODO Stone monk
*** TODO Letters from Quine in caves etc
**** TODO Also spell scrolls and food in metal boxes
*** TODO Skull seance
*** TODO Books
** TODO [#B] possibly swap right-click and left-click i.e. movement/look
** TODO [#B] Consider fully turn-based combat, or returning to Pause
*** TODO Press ESCAPE to close all gumps and unpause

** TODO [#C] Make magic potions more common
** TODO [#C] Cause Fear (15 mana) (1 nightshade)
*** 80% chance of enemy fleeing
** TODO [#C] Dispel magic (20 mana) (1 ginseng)
*** 60% chance of removing ordinary spell effects. 
** TODO [#C] Fix non-impelled arrows moving on their own 
** TODO [#C] Disallow browsing/picking from faraway containers
** TODO [#C] Fix scrolling jerkiness
** TODO [#C] implement snow/rain/darkness
** TODO [#C] Implement bleeding and blood tracks in the snow
** TODO [#C] Paint skeleton soldiers
** TODO [#C] Paint skeleton archers
** TODO [#C] Paint and Animate an Imperial Raven.
** TODO [#C] day/night cycle; survive each day; end it by camping 
** TODO [#C] implement crypts
** TODO [#C] Skeleton archers
** TODO [#C] fix wolf not chasing
** TODO [#C] Night/camp dream sequences
** TODO [#C] Floating eyes that glide and dart
** TODO [#C] Fix mac window resizing bugs
** TODO [#C] Control Q and Command q should quit game
** TODO [#C] fix z-sorting of player remains
** TODO [#C] Abstractify the sounds and/or find new ones in archive
** TODO [#C] fadein/out console-style startup screens with copyright info, sbcl "made with alien lisp" etc
** TODO [#C] Fix jittery rotation of monk at corners of paths

* Geoffrey's initial Spells

** Spark (2 mana)
*** Light torches, campfires, and dry out even soaked wood
** Vibrate stone (4 mana) (1 stone)
*** Heat up stone held in the hand
*** Reduces cold by 10pts
** Light (2 mana)
*** Casts light with medium radius
*** Lasts for 4 minutes 
*** Very slight flicker of circle
*** Required in dark areas
*** Certain enemies can negate magic spell effects, dousing your light
** Cure meat (5 mana, 1 thornweed)
*** Create healing-jerky from animal carcasses
*** TODO Paint meat
** Cure light wounds (25 mana) (2 ginseng) 
*** Heals between 10-15 hp
** Craft arrows (1 mana) (3 fatigue) (stone chips, wood) 
*** Create bundle of 20 arrows
** Boil grasses (2 fatigue) (3 grasses)
**** Make small amounts of thin gruel. requires wild grasses and water)

* Spell scrolls found in ruins or on dead travelers

** Hold creature (8 mana) (2 thornweed)
*** 80% chance of briefly paralyzing target so they cannot move or attack
** Vault on roadway, raven delivers story note or magic spell
** Craft silver arrows (1 mana) (8 fatigue) (stone chips, silverwood)
*** Create 10 3x-powerful arrows
** Craft crystal arrow (20 mana) (snow)
** Phantom Scythe (10 mana)
*** Creates white or wheat bread
** Protection (15 mana) (1 ginseng, 1 thornweed)
*** Temporary 35% reduction in combat damage received
** Craft crystal arrow (20 mana) (snow)

** Cause Fear (15 mana) (1 nightshade)
*** 80% chance of enemy fleeing
** Dispel magic (20 mana) (1 ginseng)
*** 60% chance of removing ordinary spell effects. 
** Cure heavy wounds (50 mana) (2 ginseng)
*** Heals between 40-60 HP
** Explosion (20 mana) (1 nightshade, 2 stone chips)
*** 90% chance of scorching several enemies in target area


* Quest ideas

** TODO level aura.  
** TODO [#A] Spell scrolls and Transcription spell
** TODO [#A] Find a scroll for understanding the secret language of Shayol
** raven sends message from town to east "help us"
** sextant
** discover dried nightshade. nightshade should be more rare
** help me and i'll give you X gold
** help me and i'll give you items
** old storytellers
** TODO [#C] seance spell gives you a piece of lore from a skull
** bands of brigands
** find forest treasure map, highlights a map square with a yellow icon
** defeat-all-enemies in farm-to-the-south
** investigate cave-to-west
** discover ruined house 
** cave/crypt
** lore ,pieces of text conditions that sometimes attach. 
** amulets
** wax cylinders
** discover ruined basement
** Find an item-box with a scroll inside and key relating to a specific ruin town basement
** Find poem fragments
** Randomly choose town names
** Find letter describing a key buried with some random dude, in a specific cemetery
** Must learn to time-travel forward to meet Lucius, who left the day after you
** In that town find special stuff and unlock it with the key
** Find a particular gravestone
** Special items like xalcium armor and xalcium leggings


* Archived Entries

** DONE [#A] make hungry/cold messages into Geoffrey-aligned bark bubbles
   CLOSED: [2014-02-28 Fri 04:28]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-02-28 Fri 04:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Playtest thoroughly and verify helpscroll before demo
   CLOSED: [2014-02-28 Fri 04:28]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-02-28 Fri 04:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE test 2x0ng and cypress for play
   CLOSED: [2014-02-28 Fri 04:28]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-02-28 Fri 04:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] implement darkness
   CLOSED: [2014-02-26 Wed 18:21]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-02-28 Fri 04:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] implement ruin basements
   CLOSED: [2014-02-26 Wed 18:21]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-02-28 Fri 04:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#B] lighting should "boil"
   CLOSED: [2014-02-28 Fri 04:40]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-02-28 Fri 04:41
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#B] Rewrite conversation gump
   CLOSED: [2014-02-26 Wed 15:08]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-02-28 Fri 05:03
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Paint dead traveler bodies
   CLOSED: [2014-02-28 Fri 20:59]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-07 Fri 20:00
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks/Paint more characters
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Paint basements/caves
   CLOSED: [2014-03-07 Fri 19:59]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-07 Fri 20:00
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks/Paint more characters
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Paint new prettier potions
   CLOSED: [2014-03-05 Wed 21:45]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-07 Fri 20:00
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Tasks/Paint more characters
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Double click armor/bow to equip/dequip
   CLOSED: [2014-03-08 Sat 08:51]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 08:53
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Fixes and tweaks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Silver armor increases defense power
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 08:53
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Fixes and tweaks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Silver bow increases attack power
   CLOSED: [2014-03-08 Sat 08:51]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 08:53
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Fixes and tweaks
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE organize, prioritize, and Verbify todo list
   CLOSED: [2014-03-08 Sat 08:48]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 08:53
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Improve terrain and expand Ildran
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE review unused art and objects.lisp
   CLOSED: [2014-03-08 Sat 08:48]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 08:53
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Improve terrain and expand Ildran
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#B] indicate when there is more text via ellipsis
   CLOSED: [2014-03-05 Wed 21:44]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 11:56
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** TODO Paint other objects
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 11:56
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:
*** TODO Paint ruined wood

** TODO Paint mouse cursors
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 11:56
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:
*** TODO Normal 
*** TODO Target
*** TODO Error

** DONE [#A] Mountain icons become cave worlds
   CLOSED: [2014-03-08 Sat 13:28]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 13:59
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] restrict visitable map squares in order to begin testing Act I (exception: holding shift)
   CLOSED: [2014-03-08 Sat 13:28]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 13:59
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] Fix pathfinding / placement bugs when exiting basements
   CLOSED: [2014-03-08 Sat 13:28]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 14:00
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] Reduce size of gray stairwells
   CLOSED: [2014-03-08 Sat 13:28]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 14:00
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] Add caves with item boxes and other mystery objects
   CLOSED: [2014-03-08 Sat 13:28]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 14:00
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] Add grave hag corpses with bone dust
   CLOSED: [2014-03-08 Sat 12:11]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 14:00
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Fix elixir drinking bug
   CLOSED: [2014-03-08 Sat 20:10]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-03-08 Sat 20:10
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:
