** TODO [#A] add secrets in less-used parts of map
** TODO [#B] Improve shape of flower clusters and branches wood around trees by randomly permuting positions as "Scatter operator"
** TODO [#B] Ruins: Add newly painted ruined houses, possibly with smaller basements


** TODO [#B] allow eating violets and snowdrops for restoring 1mp


** TODO [#A] review video and take notes

** TODO special gravestone
** TODO [#A] add hidden ice-cracks and some pine trees to area in between Alonso's and hidden cemetery
** TODO hidden cemetery with music and items

** TODO [#A] screech owl who drops amalia poem fragment 1
** TODO Restrict ginseng slightly, use more ginseng gardens w occasional weird stone

** TODO [#C] Implement bleeding and blood tracks in the snow
** TODO do screech owl AI
** TODO [#B] display floating neumes when owl sings 
** TODO [#A] add blackwolves
** TODO [#B] add cryptghasts that bite and then run away
** TODO [#A] increase general cold
** TODO [#A] Add strange stones (use recent valisade stones)
*** TODO Import valisade stones
** TODO [#B] add cryptghasts to basements
** TODO [#B] Hold Creature spell, uses Nightshade and freezes nearest creature
** DONE [#B] Don't incrementally reveal map. just hide hidden stuff using icons 
   CLOSED: [2014-05-11 Sun 22:04]
** TODO [#C] Exit basements with double click on stairwell
** TODO [#C] allow canceling travel
** TODO [#C] sometimes a random carved stone with lore in the middle of the woods
** TODO Switch to new red/blue/green potion graphics
** TODO [#B] Don't drop scrolls in any enemy booty packs
** TODO [#C] snow footprints?
** TODO story caves: kosmium, spiritus, dusk



* RELEASE 0.95
* TODO telekinesis spell
* [#A] 
*** TODO custom lisp for rain/thunder with fadein/fadeout
*** TODO code owl
*** TODO alter flutism.wav for downward owl cry imitation




* TODO screech owl

* Music
** TODO specify per-scene what musics are available
*** TODO "home" is too buzzy. remix up pitch?
*** TODO cypress scene: "believe-me2"
** TODO most generic squares have no music, but sometimes
** TODO fade in/out most pieces of music
** TODO story caves: kosmium, spiritus, dusk
** TODO black wizards fight.
** TODO add more tense militaristic battle cues

* Terrain
** DONE Reagent search should look in bags
   CLOSED: [2014-05-11 Sun 22:06]
** TODO Make thornweed less common in warm areas, since it's not needed then
** TODO Add some different tree/shrub types
** TODO [#C] implement snow/rain with additive blending
** TODO [#C] add tweeting birds

* Improve Lucius helper AI
*** TODO can remark upon nearby objects as a way of exposing some Lore. 
*** TODO goes home on arrival at nothbehem
*** TODO [#C] drop up to 3 healing scroll if player gets below 50%
**** TODO Implement single-use spell scrolls
***** TODO use miniscroll graphic

* Combat
** TODO return to using simple pause/resume-on-command
*** TODO change to right-click on geoffrey for Pause
**** TODO change to clicking modeline status to open Status scroll
**** TODO don't run enemies when paused
**** TODO Press ESCAPE to close all gumps and unpause
** TODO [#C] Modeline lighter(s) for Freezing/Hungry/Dying
** TODO [#C] hitting I while inventory open should close it, same with (S)pellbook
** TODO [#C] Slight health drain when freezing
** TODO [#C] Slight aim jitter when freezing
** TODO [#C] Protection (15 mana) (1 nightshade)
*** Temporary 35% reduction in combat damage received


* Nothbehem
** DONE move nothbehem down 1 row
   CLOSED: [2014-05-10 Sat 20:30]
** DONE add arturo conversations 
   CLOSED: [2014-05-10 Sat 20:30]
** DONE make arturo's house into a container
   CLOSED: [2014-05-10 Sat 20:50]
*** DONE add woolen leggings, woolen shirt, 
    CLOSED: [2014-05-10 Sat 20:50]
*** DONE add spellbooks: craft silver arrows, cure meat
    CLOSED: [2014-05-10 Sat 20:50]
*** DONE add copper-lock
    CLOSED: [2014-05-10 Sat 20:50]
** DONE [#B] Implement spell tomes that teach you the spell
   CLOSED: [2014-05-10 Sat 20:50]
*** DONE use doublepage graphic
    CLOSED: [2014-05-10 Sat 20:50]

* Arturo

** TODO arturo should return to his garden when not talking to you.
** TODO add more townspeople
** TODO [#B] Add sextant which guides you to your next location

* Alonso 
** TODO Implement alonso quest

* Resupply at nothbehem, talk to arturo

* Southern Cave
** TODO Implement "Southern Cave" with: lock/key system--- plate with lock, you must use corresponding key
*** TODO the keys weld permanently into seals. Must alter gear points in story.
*** TODO plates, gates, then copper stairwell to silver antechamber

** TODO [#A] add stone monk with Lore and story messages
*** TODO [#A] silver books with spells/Special lore

* Eavesbury Cemetery 
** TODO [#B] Seek ye the Screech Owl when storm thunders; when her cry is heard, blow the flute and she will appear
*** TODO custom lisp for rain/thunder with fadein/fadeout
*** TODO code owl
*** TODO alter flutism.wav for downward owl cry imitation

* Eastern Cave

** Stone Monk

** TODO tells you about the ancient road to Valisade

* Ancient road
** TODO import improved ancient-road graphic (non-contrast-adjusted version) 


* Bugfixes

** TODO [#B] Fix spellcasting/activating objects after dead
** TODO [#B] auto-close inventory windows on faraway objects if you move
** TODO [#B] destroy bubbles when closing gumps
** TODO [#B] don't allow spawning geoffrey in obstacle
** TODO [#C] should show-error when pathfinding fails ONLY for geoffrey
** TODO [#C] Fix non-impelled arrows moving on their own 
** TODO [#C] Fix scrolling jerkiness
** TODO [#C] Add heuristic to try to choose a decent spot, when target space isn't occupiable
*** TODO this is needed for wolf to chase human when human w/smaller bounding box is near an obstacle
** TODO [#C] Conversation system should be more flexible
   
* TODO RELEASE 0.95
** TODO update helpfile

* TODO CHAPTER 2
** TODO Allow special verb/action where game stops for a target of USEing

** TODO [#A] Craft crystal arrow (20 mana) (snow)
** TODO [#A] Cure heavy wounds (50 mana) (2 ginseng)
*** Heals between 40-60 HP
** TODO [#B] Light spell (2 mana)
*** Casts light with medium radius
*** Lasts for 4 minutes 
*** Required in dark areas
*** Certain enemies can negate magic spell effects, dousing your light
** TODO [#A] Revise enemy-damages-geoffrey situation
** TODO [#A] Define quest/worldmap structure 
*** DONE Create draft Lore timeline
    CLOSED: [2014-05-08 Thu 19:15]
** TODO allow saving progress like a traditional rpg
*** TODO can only save at map screen
** TODO [#A] Add fur cloak for chapter 2
** TODO [#B] preload textures when possible---allow method for preloading and default field of resource names
** TODO [#A] assign songs to scenes/moments
** TODO [#B] Add Clockwork Valisade Knight

** TODO [#B] Paint some nicer trees
** TODO [#B] Explosion (20 mana) (1 nightshade, 1 stone)
*** 90% chance of scorching several enemies in target area
** TODO [#B] Write lore for various sources
*** TODO Default object lore
*** TODO Stone monk
*** TODO Letters from Quine in caves etc
**** TODO Also spell scrolls and food in metal boxes
*** TODO Skull seance
*** TODO Books
** TODO [#C] Make magic potions more common
** TODO [#C] Cause Fear (15 mana) (1 nightshade)
*** 80% chance of enemy fleeing
** TODO [#C] Dispel magic (20 mana) (1 ginseng)
*** 60% chance of removing ordinary spell effects. 

** TODO [#C] day/night cycle; survive each day; end it by camping 
** TODO [#C] Night/camp dream sequences
** TODO [#C] Cryptghasts that glide and dart
** TODO [#C] Fix mac window resizing bugs
** TODO [#C] Control Q and Command q should quit game
** TODO [#C] fix z-sorting of player remains
** TODO [#C] Abstractify the sounds and/or find new ones in archive
** TODO [#C] fadein/out console-style startup screens with copyright info, sbcl "made with alien lisp" etc
** TODO [#C] Fix jittery rotation of monk at corners of paths

* Archived Entries

** DONE [#A] Don't specify Amalia's birthplace/time
   CLOSED: [2014-05-08 Thu 19:33]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 19:33
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Features
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] create fixed-symbols dense overworld map on graph paper
   CLOSED: [2014-05-08 Thu 19:16]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 19:34
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Features
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Write story/activity timeline based on icon board map
   CLOSED: [2014-05-08 Thu 01:17]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 19:34
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Features
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] Change Ildran to Ildron
   CLOSED: [2014-05-08 Thu 19:38]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 19:38
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] don't allow tent to be put in containers other than Geoffrey
   CLOSED: [2014-05-08 Thu 19:44]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 19:44
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] disallow deploying tent on top of geoffrey
   CLOSED: [2014-05-08 Thu 19:42]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 19:44
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** TODO [#A] disallow equipping non-held items
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 19:50
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** DONE [#A] watch for wolves duplication in terrain.lisp/scene.lisp
   CLOSED: [2014-05-08 Thu 19:51]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 19:51
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] Don't allow giving things to lucius
   CLOSED: [2014-05-08 Thu 19:58]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 19:58
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE [#A] don't consume wolf corpse unless cast is successful,
   CLOSED: [2014-05-08 Thu 20:08]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 20:08
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** TODO [#A] Disallow dropping items on faraway containers
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 20:08
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** TODO [#A] Disallow activating faraway objects
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 20:08
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** TODO [#A] Disallow browsing/picking from faraway containers
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 20:08
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** TODO [#A] Disable text event handling on SCROLL-TEXT etc http://paste.lisp.org/display/141642
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 20:14
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** DONE [#A] use only one NARRATE function
   CLOSED: [2014-05-08 Thu 20:10]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 20:14
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Add Chapter 1 todo items from Storyline
   CLOSED: [2014-05-08 Thu 20:41]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 20:41
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Version 0.95 contains a rough draft of chapter 1
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Geoffrey should start the game with Quine's summons
   CLOSED: [2014-05-08 Thu 21:02]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 22:54
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Version 0.95 contains a rough draft of chapter 1
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** TODO [#A] enter partial New Ildron map data into Lisp via roguelike chars
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-08 Thu 22:54
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** DONE write function to auto-position Lucius when Geoffrey enters a level
   CLOSED: [2014-05-09 Fri 00:05]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-09 Fri 00:05
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Implement Lucius helper AI
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE new conversation tree for help, including help scroll
   CLOSED: [2014-05-09 Fri 00:05]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-09 Fri 00:06
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Implement Lucius helper AI
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE following flag
   CLOSED: [2014-05-09 Fri 00:05]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-09 Fri 00:06
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Implement Lucius helper AI
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE revise introductory conversation
   CLOSED: [2014-05-09 Fri 00:05]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-09 Fri 00:06
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Implement Lucius helper AI
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE should just find geoffrey when no flowers
   CLOSED: [2014-05-09 Fri 05:50]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-09 Fri 05:50
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Implement Lucius helper AI
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** TODO throw stones at enemy and cheer geoffrey on during combat
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-09 Fri 05:50
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Implement Lucius helper AI
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** DONE Make houses
   CLOSED: [2014-05-09 Fri 05:53]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-09 Fri 06:56
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Combat
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Make arturo's house and arturo
   CLOSED: [2014-05-09 Fri 06:35]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-09 Fri 06:56
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Combat
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Indicate error when trying to open faraway
   CLOSED: [2014-05-08 Thu 20:18]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-09 Fri 07:04
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: Bugfixes
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** DONE Change scene class so that it only generates terrain on
 first visit
   CLOSED: [2014-05-10 Sat 20:28]
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-10 Sat 20:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: RELEASE 0.95
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: DONE
   :END:

** TODO Change map class so that it instantiates all the scenes
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-10 Sat 20:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: RELEASE 0.95
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** TODO Make the icon and description into methods that refer to existing data
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-10 Sat 20:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: RELEASE 0.95
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** TODO [#A] Expire texture cache at travel time
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-10 Sat 20:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: hidden forest cemetery with screech owl
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** TODO [#A] Expire texture cache at travel time
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-10 Sat 20:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: General
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:

** TODO [#A] fix object dup error when peeling one from stack into opened sub container gump
   :PROPERTIES:
   :ARCHIVE_TIME: 2014-05-10 Sat 20:28
   :ARCHIVE_FILE: ~/cypress/valisade.org
   :ARCHIVE_OLPATH: General
   :ARCHIVE_CATEGORY: valisade
   :ARCHIVE_TODO: TODO
   :END:
